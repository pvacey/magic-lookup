var xe=Object.defineProperty;var Fe=(e,t,n)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>(Fe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function U(){}function Je(e){return e()}function Ce(){return Object.create(null)}function W(e){e.forEach(Je)}function Le(e){return typeof e=="function"}function _e(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ie;function Z(e,t){return e===t?!0:(ie||(ie=document.createElement("a")),ie.href=t,e===ie.href)}function Ue(e){return Object.keys(e).length===0}const We=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function m(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function Me(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function ye(e){return document.createTextNode(e)}function R(){return ye(" ")}function De(){return ye("")}function I(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ke(e){return Array.from(e.childNodes)}function Ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ie(e,t){e.value=t??""}function g(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let le;function Xe(){if(le===void 0){le=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{le=!0}}return le}function Ge(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=_("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const s=Xe();let i;return s?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=I(window,"message",o=>{o.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{i=I(r.contentWindow,"resize",t),t()}),m(e,r),()=>{(s||i&&r.contentWindow)&&i(),N(r)}}function Qe(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let ee;function $(e){ee=e}function ve(){if(!ee)throw new Error("Function called outside component initialization");return ee}function Ye(e){ve().$$.on_mount.push(e)}function Ze(e){ve().$$.after_update.push(e)}function Pe(){const e=ve();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=Qe(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}const X=[],x=[];let G=[];const Ee=[],Be=Promise.resolve();let he=!1;function He(){he||(he=!0,Be.then(Re))}function $e(){return He(),Be}function ce(e){G.push(e)}const de=new Set;let V=0;function Re(){if(V!==0)return;const e=ee;do{try{for(;V<X.length;){const t=X[V];V++,$(t),et(t.$$)}}catch(t){throw X.length=0,V=0,t}for($(null),X.length=0,V=0;x.length;)x.pop()();for(let t=0;t<G.length;t+=1){const n=G[t];de.has(n)||(de.add(n),n())}G.length=0}while(X.length);for(;Ee.length;)Ee.pop()();he=!1,de.clear(),$(e)}function et(e){if(e.fragment!==null){e.update(),W(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ce)}}function tt(e){const t=[],n=[];G.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),G=t}const oe=new Set;let F;function ge(){F={r:0,c:[],p:F}}function pe(){F.r||W(F.c),F=F.p}function q(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function T(e,t,n,r){if(e&&e.o){if(oe.has(e))return;oe.add(e),F.c.push(()=>{oe.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ae(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Te(e){e&&e.c()}function be(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),ce(()=>{const i=e.$$.on_mount.map(Je).filter(Le);e.$$.on_destroy?e.$$.on_destroy.push(...i):W(i),e.$$.on_mount=[]}),s.forEach(ce)}function we(e,t){const n=e.$$;n.fragment!==null&&(tt(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(e,t){e.$$.dirty[0]===-1&&(X.push(e),He(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Se(e,t,n,r,s,i,o=null,f=[-1]){const a=ee;$(e);const c=e.$$={fragment:null,ctx:[],props:i,update:U,not_equal:s,bound:Ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Ce(),dirty:f,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let A=!1;if(c.ctx=n?n(e,t.props||{},(h,S,...E)=>{const b=E.length?E[0]:S;return c.ctx&&s(c.ctx[h],c.ctx[h]=b)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](b),A&&nt(e,h)),S}):[],c.update(),A=!0,W(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const h=Ke(t.target);c.fragment&&c.fragment.l(h),h.forEach(N)}else c.fragment&&c.fragment.c();t.intro&&q(e.$$.fragment),be(e,t.target,t.anchor),Re()}$(a)}class ke{constructor(){fe(this,"$$");fe(this,"$$set")}$destroy(){we(this,1),this.$destroy=U}$on(t,n){if(!Le(n))return U;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Ue(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rt);function st(e){let t,n,r,s;return{c(){t=_("div"),n=ye(e[0]),d(t,"class","searchitem")},m(i,o){L(i,t,o),m(t,n),r||(s=I(t,"click",e[1]),r=!0)},p(i,[o]){o&1&&Ve(n,i[0])},i:U,o:U,d(i){i&&N(t),r=!1,s()}}}function it(e,t,n){let{cardname:r}=t;const s=Pe();function i(){s("message",{cardname:r})}return e.$$set=o=>{"cardname"in o&&n(0,r=o.cardname)},[r,i]}class lt extends ke{constructor(t){super(),Se(this,t,it,st,_e,{cardname:0})}}function ot(e){let t,n,r,s,i,o;return{c(){t=_("div"),n=_("div"),r=_("img"),Z(r.src,s=e[0].image)||d(r,"src",s),d(r,"alt",""),d(n,"class","card"),g(n,"transform","rotate("+(Math.random()*1.5-1)+"deg) translateX("+Math.random()*10+"px)"),d(t,"class","cardspacer"),g(t,"height",e[1]+"px"),g(t,"margin-top","-"+e[1]/4+"px")},m(f,a){L(f,t,a),m(t,n),m(n,r),i||(o=[I(r,"mouseenter",e[2]),I(r,"mouseleave",e[3]),I(r,"click",e[4])],i=!0)},p(f,[a]){a&1&&!Z(r.src,s=f[0].image)&&d(r,"src",s),a&2&&g(t,"height",f[1]+"px"),a&2&&g(t,"margin-top","-"+f[1]/4+"px")},i:U,o:U,d(f){f&&N(t),i=!1,W(o)}}}function ct(e,t,n){let{data:r}=t,{cardSpace:s}=t;const i=Pe();function o(){i("message",{type:"mouseenter",data:r})}function f(){i("message",{type:"mouseleave",data:r})}function a(){i("message",{type:"click",data:r})}return e.$$set=c=>{"data"in c&&n(0,r=c.data),"cardSpace"in c&&n(1,s=c.cardSpace)},[r,s,o,f,a]}class at extends ke{constructor(t){super(),Se(this,t,ct,ot,_e,{data:0,cardSpace:1})}}const{window:Oe}=We;function je(e,t,n){const r=e.slice();return r[33]=t[n],r}function Ne(e,t,n){const r=e.slice();return r[36]=t[n],r}function qe(e){let t,n;return t=new lt({props:{cardname:e[36]}}),t.$on("message",e[14]),{c(){Te(t.$$.fragment)},m(r,s){be(t,r,s),n=!0},p(r,s){const i={};s[0]&2&&(i.cardname=r[36]),t.$set(i)},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){we(t,r)}}}function Ae(e){let t,n,r=ae(e[4]),s=[];for(let o=0;o<r.length;o+=1)s[o]=ze(je(e,r,o));const i=o=>T(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();t=De()},m(o,f){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,f);L(o,t,f),n=!0},p(o,f){if(f[0]&524560){r=ae(o[4]);let a;for(a=0;a<r.length;a+=1){const c=je(o,r,a);s[a]?(s[a].p(c,f),q(s[a],1)):(s[a]=ze(c),s[a].c(),q(s[a],1),s[a].m(t.parentNode,t))}for(ge(),a=r.length;a<s.length;a+=1)i(a);pe()}},i(o){if(!n){for(let f=0;f<r.length;f+=1)q(s[f]);n=!0}},o(o){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)T(s[f]);n=!1},d(o){o&&N(t),Me(s,o)}}}function ze(e){let t,n;return t=new at({props:{cardSpace:e[8],data:e[33]}}),t.$on("message",e[19]),{c(){Te(t.$$.fragment)},m(r,s){be(t,r,s),n=!0},p(r,s){const i={};s[0]&256&&(i.cardSpace=r[8]),s[0]&16&&(i.data=r[33]),t.$set(i)},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){we(t,r)}}}function ut(e){let t,n,r,s,i,o,f,a,c,A,h,S,E,b,M,z,O,w,k,te,D,C,Q,J,P,H,ne,re,j,Y,se,B=ae(e[1]),p=[];for(let l=0;l<B.length;l+=1)p[l]=qe(Ne(e,B,l));const ue=l=>T(p[l],1,1,()=>{p[l]=null});let v=e[4].length>0&&Ae(e);return{c(){t=_("head"),t.innerHTML='<meta charset="utf-8"/> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Space Mono"/>',n=R(),r=_("div"),s=_("div"),i=_("input"),o=R(),f=_("div");for(let l=0;l<p.length;l+=1)p[l].c();a=R(),c=_("div"),c.textContent="clear",A=R(),h=_("div"),S=_("div"),E=_("div"),b=R(),M=_("div"),z=_("img"),w=R(),k=_("div"),k.textContent="history",te=R(),D=_("div"),C=_("div"),v&&v.c(),Q=R(),J=_("div"),P=_("div"),H=_("img"),d(i,"type","text"),d(i,"placeholder","search..."),d(i,"class","svelte-1jhvcqi"),d(f,"class","searchresultsbox svelte-1jhvcqi"),d(s,"class","searchboxinner svelte-1jhvcqi"),d(r,"class","searchbox svelte-1jhvcqi"),d(c,"class","clearbutton"),g(c,"position","absolute"),g(c,"bottom","10px"),g(c,"right","10px"),g(c,"z-index","2"),g(c,"border","3px solid #494949"),g(c,"padding","5px"),g(c,"cursor","pointer"),g(c,"background-color","white"),d(E,"class","searchboxpadding svelte-1jhvcqi"),Z(z.src,O=e[10].image)||d(z,"src",O),d(z,"class","svelte-1jhvcqi"),d(M,"class","selectedcard svelte-1jhvcqi"),d(k,"class",""),g(k,"text-align","center"),g(k,"padding","5px"),Z(H.src,ne=me)||d(H,"src",ne),d(H,"alt",""),d(H,"class","svelte-1jhvcqi"),d(P,"class","card svelte-1jhvcqi"),ce(()=>e[27].call(P)),d(J,"class","cardspacer svelte-1jhvcqi"),g(J,"height",e[9]+"px"),g(J,"margin-top","-"+e[8]/4+"px"),d(C,"class","cardhistory svelte-1jhvcqi"),g(C,"padding-top",e[8]/4+35+"px"),g(C,"height",e[12]-(e[8]/4+35)+"px"),d(D,"class","cardhistorycontainer svelte-1jhvcqi"),d(h,"class","root svelte-1jhvcqi"),g(h,"visibility",e[3])},m(l,u){L(l,t,u),L(l,n,u),L(l,r,u),m(r,s),m(s,i),e[21](i),Ie(i,e[0]),m(s,o),m(s,f);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(f,null);e[23](f),e[24](r),L(l,a,u),L(l,c,u),L(l,A,u),L(l,h,u),m(h,S),m(S,E),e[25](E),m(S,b),m(S,M),m(M,z),m(S,w),m(S,k),e[26](S),m(h,te),m(h,D),m(D,C),v&&v.m(C,null),m(C,Q),m(C,J),m(J,P),m(P,H),re=Ge(P,e[27].bind(P)),j=!0,Y||(se=[I(Oe,"resize",e[16]),I(Oe,"keypress",e[17]),I(i,"input",e[22]),I(i,"input",e[13]),I(i,"keydown",e[15]),I(c,"click",e[18]),I(z,"click",e[20])],Y=!0)},p(l,u){if(u[0]&1&&i.value!==l[0]&&Ie(i,l[0]),u[0]&16386){B=ae(l[1]);let y;for(y=0;y<B.length;y+=1){const K=Ne(l,B,y);p[y]?(p[y].p(K,u),q(p[y],1)):(p[y]=qe(K),p[y].c(),q(p[y],1),p[y].m(f,null))}for(ge(),y=B.length;y<p.length;y+=1)ue(y);pe()}(!j||u[0]&1024&&!Z(z.src,O=l[10].image))&&d(z,"src",O),l[4].length>0?v?(v.p(l,u),u[0]&16&&q(v,1)):(v=Ae(l),v.c(),q(v,1),v.m(C,Q)):v&&(ge(),T(v,1,1,()=>{v=null}),pe()),(!j||u[0]&512)&&g(J,"height",l[9]+"px"),(!j||u[0]&256)&&g(J,"margin-top","-"+l[8]/4+"px"),(!j||u[0]&256)&&g(C,"padding-top",l[8]/4+35+"px"),(!j||u[0]&4352)&&g(C,"height",l[12]-(l[8]/4+35)+"px"),(!j||u[0]&8)&&g(h,"visibility",l[3])},i(l){if(!j){for(let u=0;u<B.length;u+=1)q(p[u]);q(v),j=!0}},o(l){p=p.filter(Boolean);for(let u=0;u<p.length;u+=1)T(p[u]);T(v),j=!1},d(l){l&&(N(t),N(n),N(r),N(a),N(c),N(A),N(h)),e[21](null),Me(p,l),e[23](null),e[24](null),e[25](null),e[26](null),v&&v.d(),re(),Y=!1,W(se)}}}let me="https://backs.scryfall.io/large/2/2/222b7a3b-2321-4d4c-af19-19338b134971.jpg?1677416389";function ft(e,t,n){let r="",s=[],i,o="hidden",f=[],a=[],c,A,h,S,E,b={image:me},M,z,O=b,w=0,k;const te=async()=>{const u=await(await fetch("https://api.scryfall.com/cards/autocomplete?q="+r)).json();n(1,s=u.data),await $e(),w==0&&i!==void 0&&i.children.length>0&&n(2,i.children[0].style.background="#ece8d9",i)},D=l=>{C(l.detail.cardname)},C=l=>{fetch("https://api.scryfall.com/cards/named?exact="+l).then(u=>u.json()).then(u=>{let K={image:"image_uris"in u?u.image_uris.normal:u=u.card_faces[0].data.image_uris.normal,link:u.scryfall_uri};f.push(K),n(4,a=f.toReversed()),n(1,s=[]),n(0,r=""),n(3,o="visible"),O=K,n(10,b=K),localStorage.setItem("clickedCard",JSON.stringify(O)),localStorage.setItem("selectedCard",JSON.stringify(b)),localStorage.setItem("cards",JSON.stringify(f)),localStorage.setItem("displayCards",JSON.stringify(a))}).catch(u=>console.error("Error:",u))},Q=l=>{l.key==="Enter"&&s.length>0?(k||(k=s[0]),C(k),w=0,k=null):l.key==="Escape"&&s.length>0&&(n(1,s=[]),w=0,k=null),l.key==="ArrowDown"&&s.length>0&&(n(2,i.children[w].style.background="white",i),w<s.length-1&&w++,k=s[w],n(2,i.children[w].style.background="#ece8d9",i)),l.key==="ArrowUp"&&s.length>0&&(n(2,i.children[w].style.background="white",i),w>0&&w--,k=s[w],n(2,i.children[w].style.background="#ece8d9",i))};Ye(async()=>{try{localStorage.getItem("clickedCard")&&(O=JSON.parse(localStorage.getItem("clickedCard"))),localStorage.getItem("selectedCard")&&n(10,b=JSON.parse(localStorage.getItem("selectedCard"))),localStorage.getItem("cards")&&(f=JSON.parse(localStorage.getItem("cards"))),localStorage.getItem("displayCards")&&n(4,a=JSON.parse(localStorage.getItem("displayCards")))}catch(l){console.log(l)}a.length>0&&n(3,o="visible"),n(5,c.style.height=A.offsetHeight+"px",c),h.focus()}),Ze(()=>J());const J=l=>{n(12,z=document.body.offsetHeight-M.offsetHeight),n(8,S=E/4)},P=l=>{document.activeElement!==h&&h.focus()},H=l=>{f=[],n(4,a=[]),n(10,b={image:me}),n(3,o="hidden"),console.log("click"),localStorage.removeItem("clickedCard"),localStorage.removeItem("selectedCard"),localStorage.removeItem("cards"),localStorage.removeItem("displayCards")},ne=l=>{switch(l.detail.type){case"mouseenter":n(10,b=l.detail.data);break;case"mouseleave":n(10,b=O);break;case"click":O=l.detail.data,n(10,b=O),localStorage.setItem("clickedCard",JSON.stringify(O)),localStorage.setItem("selectedCard",JSON.stringify(b))}},re=l=>{window.open(b.link)};function j(l){x[l?"unshift":"push"](()=>{h=l,n(7,h)})}function Y(){r=this.value,n(0,r)}function se(l){x[l?"unshift":"push"](()=>{i=l,n(2,i)})}function B(l){x[l?"unshift":"push"](()=>{A=l,n(6,A)})}function p(l){x[l?"unshift":"push"](()=>{c=l,n(5,c)})}function ue(l){x[l?"unshift":"push"](()=>{M=l,n(11,M)})}function v(){E=this.clientHeight,n(9,E)}return[r,s,i,o,a,c,A,h,S,E,b,M,z,te,D,Q,J,P,H,ne,re,j,Y,se,B,p,ue,v]}class dt extends ke{constructor(t){super(),Se(this,t,ft,ut,_e,{},null,[-1,-1])}}new dt({target:document.getElementById("app")});
